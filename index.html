<!doctype html><html lang=en><meta charset=utf-8>
<meta name=viewport content=width=device-width>
<title>shitcoins.wtf</title><script>
api = "https://api.coinmarketcap.com/v1"
pairs = "LTCBTC,XMRBTC,ETHBTC,MKRETH,MKRBTC,ETCETH,ETCBTC,ZECBTC,REPETH,REPBTC,DOGE_BTC,BCHBTC,GNTETH,BTSBTC,DASH_BTC,XEMBTC,OMGETH,BATETH,LSKETH,BSVBTC"
signs = { BTC: "₿", LTC: "Ł", ETH: "Ξ", DAI: "⬙" }
if (location.search) location.href = location.href.replace(/\?.*/, "")
</script><style>
@import url("https://fonts.googleapis.com/css?family=Fira+Mono:400,700");
html { font: 12pt/1.3 "Fira Mono", monospace; }
@media (min-width: 768px) {
  html { font-size: 24pt; }
}
body { background: black; color: #999; margin: 0; }
a { color: inherit; }
table { border-collapse: collapse; width: 100%; }
td, th { padding: 0 .25rem; vertical-align: top; }
th { color: white; font-weight: normal; }
b { font-weight: inherit; color: white; }
.extra b { color: inherit; }
.gray { color: gray }
.red { color: red }
.green { color: #8f8 }
.extra * { color: inherit }
sub { line-height: 0; font-size: 60%; color: #999 }
.blue, .blue * { background: blue; color: white; }
</style><body><script>
small = document.body.offsetWidth < 1024
_ = x => `${x.substr(0, x.length / 2)}_${x.substr(x.length / 2)}`
pairs = pairs.split(",").map(x => (/_/.test(x) ? x : _(x)).split("_"))
starred = x => [].concat(...pairs).includes(x.symbol)
extras = x => pairs.filter(y => y[0] == x).map(x => coin(x[1]))
classes = x => [x.symbol, ...(starred(x) ? ["star"] : [])]
redgreen = x => redgreen100(x.percent_change_24h)
redgreen100 = x => Math.abs(Math.round(x)) < 1 ? "#999" : x < 0 ? "red" : "green"
percentk = x => x > 1000 ? `${Math.round(x / 1000)}k` : x
percent = x => percentk(Math.round(x * 100)) + "%"
longpercent = x => `${x < 0.1 ? (x * 100).toFixed(1) : Math.round(x * 100)}%`
order = x => Math.floor(Math.log10(x) / 3)
orders = ["p", "n", "&mu;", "m", "dummy", "k", "M", "B", "T"]
unit = x => order(x) ? orders[order(x) + 4] || "??" : ""
highlight = x => trim(x.replace(/.+/, "<b>$&</b>"))
trim = x => small ? x.replace(/(\d{2,3})\.\d+/, "$1") : x.replace(/(\d{3})\.\d+/, "$1")
num = x => highlight((x / Math.pow(10, order(x) * 3)).toFixed(small ? 1 : 2))
$2 = x => format(x).replace(/(?=\d)/, "$")
$ = x => cent(format(x).replace(/(?=\d)/, "$"))
cent = x => trim(x.replace(/m<b>\$([\d.]+)/g, (m, n) => `<b>&cent;${(n / 10).toFixed(small ? 1 : 2)}`))
format = x => order(x) < 0 ? `${unit(x)}${num(x)}` : `${num(x)}${unit(x)}`
formatshort = x => format(x).replace(/\D/g, "").substr(0, 2)
crop = (x, n) => x.length > n ? x.substr(0, n - 1) + "&hellip;" : x
coin = x => ticker.find(y => y.symbol == x)
share = x => percent(x.market_cap_usd / global.total_market_cap_usd)
plusminus = x => String(x).replace(/^[^-]/, "+$&").replace(/^-/, "&minus;")
percentchange = x => `${plusminus(x)}%`
change = x => `<span class=${redgreen100(Math.round(x))}>${percentchange(Math.round(x))}</span>`
$$$ = (x, y) => format(x / y.price_usd).replace(/(?=<b>)/, signs[y.symbol] || "")
$$$$ = (x, y) => y.symbol == "USDT" ? $(x / y.price_usd) : $$$(x, y)
int = x => String(x).replace(/(\d)(\d\d\d)$/, "$1,$2")
onload = async () => { try {
ticker = (await (await fetch(`${api}/ticker/`)).json()).slice(0, 99)
global = await (await fetch(`${api}/global/`)).json()
btc = ticker.find(x => x.symbol == "BTC")
document.body.innerHTML = small ? (`<table>
<thead>
  <tr class=blue>
    <td align=right><td>TOKEN
    <td align=right>MCAP
    <td align=right>PRICE
    <td align=right>HR
    <td align=right>DAY
    <td align=right>VOL24
    <td align=right>WEEK
<tbody>
${ticker.map(x => `
  <tr class="${classes(x).join(" ")}">
    <td align=right> ${x.rank}
    <th align=left> ${crop(x.symbol, 5)}
    <td align=right> ${$(x.market_cap_usd)}
    <td align=right class=blue> ${$(x.price_usd)}${
      order(x.price_usd) > 0 ? "" : "&nbsp;"}
    <td align=right> ${change(x.percent_change_1h)}
    <td align=right> ${change(x.percent_change_24h)}
    <td align=right> <b>${$(x["24h_volume_usd"])}</b>
    <td align=right> ${change(x.percent_change_7d)}
  ${extras(x.symbol).map((y, i) => `
  <tr class=extra>
    <td><td align=left colspan=2>
    <span style="font: 10pt sans-serif">vs ${y.symbol}</span>
    <span style="float: right"> ${longpercent(x.market_cap_usd / y.market_cap_usd)}
    <td align=right> ${$$$$(x.price_usd, y)}${
      order(x.price_usd / y.price_usd) > 0 ? "" : "&nbsp;"}
    <td align=right>${change(((1 + x.percent_change_1h / 100) / (1 + y.percent_change_1h / 100) - 1) * 100)}</td>
    <td align=right>${change(((1 + x.percent_change_24h / 100) / (1 + y.percent_change_24h / 100) - 1) * 100)}</td>
    <td align=right> ${longpercent(x["24h_volume_usd"] / y["24h_volume_usd"])}
    <td align=right>${change(((1 + x.percent_change_7d / 100) / (1 + y.percent_change_7d / 100) - 1) * 100)}</td>
  `).join("")}`).join("")}
</table>`) : `<table>
${ticker.map(x => `
  <tr class="${classes(x).join(" ")}">
    <td align=right> ${x.rank}
    <th align=left style="letter-spacing: -1px">${x.name} ${signs[x.symbol] ? `(${signs[x.symbol]})` : ""}</th>
    <td align=right title="Total available supply: ${
      Number(x.available_supply).toLocaleString()
    } ${x.symbol}"> ${$(x.market_cap_usd)}
    <td align=right> ${crop(x.symbol, 100)}
    <td align=right> ${$(x.price_usd)}${
      order(x.price_usd) > 0 ? "" : "&nbsp;"}
    <td align=right> ${change(x.percent_change_24h)}
    <td align=right> ${$(x["24h_volume_usd"])}
  ${extras(x.symbol).map(y => `
  <tr class=extra>
    <td><td style="letter-spacing: -1px">vs ${y.name}
    <td align=right> ${percent(x.market_cap_usd / y.market_cap_usd)}
    <td align=right>
    <td align=right> ${$$$$(x.price_usd, y)}${
      order(x.price_usd / y.price_usd) > 0 ? "" : "&nbsp;"}
  `).join("")}`).join("")}
<tfoot style="display: none">
  <td align=right colspan=7>
    via <a href=https://coinmarketcap.com>coinmarketcap.com</a>
`} catch (e) {
  document.body.style.padding = "2rem"
  document.body.innerHTML = `
    <b style="color: red">Error:</b> ${e.toString()}
    <p> Note: For some reason the CMC API is caught by ad blockers.
    <p><a href=https://www.google.com/search?q=coinmarketcap+api+ad+blocker>
      https://www.google.com/search?q=coinmarketcap+api+ad+blocker
    </a>
  `
} }</script>
