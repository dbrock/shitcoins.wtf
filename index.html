<!doctype html><html lang=en><meta charset=utf8><title>
shitcoins.wtf
</title><style>
html { font: 24pt/1 monospace; background: black; color: white; }
body { max-width: 50rem; margin: auto; }
a, th { color: inherit; font: inherit; }
table { border-collapse: collapse; width: 100%; }
td, th { padding: 0 .5rem; vertical-align: top; }
thead, tfoot { text-align: right; }
thead :first-child { background: white; color: black; }
thead :last-child, tfoot { background: blue; font-weight: bold; }
</style><script>
api = "https://api.coinmarketcap.com/v1"
percent = x => Math.round(x * 100) + "%"
format = x => x < 1e3 ? (+x).toFixed(2) : Math.round(x).toLocaleString()
onload = async () => {
  ticker = await (await fetch(`${api}/ticker/`)).json()
  global = await (await fetch(`${api}/global/`)).json()
  btc = ticker.find(coin => coin.symbol == "BTC")
  eth = ticker.find(coin => coin.symbol == "ETH")
  etc = ticker.find(coin => coin.symbol == "ETC")
  bch = ticker.find(coin => coin.symbol == "BCH")
  mkr = (await (await fetch(`${api}/ticker/maker/`)).json())[0]
  mkr.market_cap_usd = mkr.price_usd * mkr.total_supply
  mkr.rank = ticker.findIndex(coin => coin.market_cap_usd < mkr.market_cap_usd)
  ticker.splice(mkr.rank, 0, mkr)
  document.body.innerHTML = render()
}
render = () => `<table>
  <thead><tr><td colspan=7>
      ETHBTC ${(eth.price_usd / btc.price_usd).toFixed(3)}
    │ BCHBTC ${(bch.price_usd / btc.price_usd).toFixed(3)}
    │ ETCETH ${(etc.price_usd / eth.price_usd).toFixed(3)}
    │ MKRETH ${(mkr.price_usd / eth.price_usd).toFixed(3)}
  </td></tr><tr>
    <td align=right></td>
    <td align=right>Total market cap:</td>
    <td align=right>$${format(Number(global.total_market_cap_usd) / 1e9)}B</td>
    <td colspan=3></td>
    <td align=right>$${format(Number(global.total_24h_volume_usd) / 1e9)}B/d</td>
  </tr></thead>
  ${ticker.map(coin => `<tr>
    <td align=right>${coin.rank}</td>
    <th align=left>${coin.name}</th>
    <td align=right>$${format(Number(coin.market_cap_usd) / 1e9)}B</td>
    <td align=right>${coin.symbol}</th>
    <td align=right>$${format(coin.price_usd)}</td>
    <td align=right>${Math.round(coin.percent_change_24h).toString()
      .replace(/^[^-]/, "+$&").replace(/^-/, "&minus;")
    }%/d</td>
    <td align=right>$${format(+coin["24h_volume_usd"] / 1e9)}B/d</td>
  </tr>`).join("")}
  <tfoot><td colspan=7>
    Data from <a href=https://coinmarketcap.com>coinmarketcap.com</a>
  </td></tfoot>
</table>`
</script>
